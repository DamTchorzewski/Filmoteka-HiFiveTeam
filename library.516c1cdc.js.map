{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-1a56256f573c09dc.js","src/js/library.js","src/js/myLibrary.js","node_modules/@parcel/runtime-js/lib/runtime-95c486de2414f68d.js","node_modules/@parcel/runtime-js/lib/runtime-e0302d9ca7e88e9d.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.516c1cdc.js\\\",\\\"k48PE\\\":\\\"noImg.9467229c.jpg\\\",\\\"k7EMm\\\":\\\"grandma.62956977.jpg\\\",\\\"fRoIN\\\":\\\"library.6d002650.js\\\"}\"));","import './modalMovie.js';\nimport './btnModal.js';\nimport './modalTeam.js';\nimport './myLibrary.js';\nimport './trailer.js';\n","import refs from './refs';\nimport Api from './api';\nimport grandma from '../images/myLibrary/grandma.jpg';\nimport noImg from '../images/moviesGallery/noImg.jpg';\nimport Storage from './localStorage';\n\nconst showWatched = async () => {\n  try {\n    const moviesId = Storage.watched;\n    const movies = await Api.getMoviesById(moviesId);\n\n    renderMovieCard(movies);\n    refs.libraryGallery.style.justifyContent = 'flex-start';\n\n    if (!refs.btnWatched.classList.contains('active-btn')) {\n      refs.btnWatched.classList.add('active-btn');\n      refs.btnQueue.classList.remove('active-btn');\n    }\n\n    if (!Storage.watched.length) {\n      refs.libraryGallery.innerHTML = `<li class=\"grandma\"><img src=\"${grandma}\" alt=\"Grandma, there's nothing here\" /></li>`;\n      refs.libraryGallery.style.justifyContent = 'center';\n    }\n  } catch (err) {\n    console.error(err.stack);\n  }\n};\n\nrefs.btnWatched.addEventListener('click', showWatched);\nshowWatched();\n\nconst showQueue = async () => {\n  try {\n    const moviesId = Storage.queue;\n    const movies = await Api.getMoviesById(moviesId);\n\n    renderMovieCard(movies);\n    refs.libraryGallery.style.justifyContent = 'flex-start';\n\n    if (!refs.btnQueue.classList.contains('active-btn')) {\n      refs.btnQueue.classList.add('active-btn');\n      refs.btnWatched.classList.remove('active-btn');\n    }\n\n    if (!Storage.queue.length) {\n      refs.libraryGallery.innerHTML = `<li class=\"grandma\"><img src=\"${grandma}\" alt=\"Grandma, there's nothing here\" /></li>`;\n      refs.libraryGallery.style.justifyContent = 'center';\n    }\n  } catch (err) {\n    console.error(err.stack);\n  }\n};\n\nrefs.btnQueue.addEventListener('click', showQueue);\n\nrefs.addToWatchedBtn.addEventListener('click', () => {\n  if (refs.btnWatched.classList.contains('active-btn')) {\n    return showWatched();\n  }\n\n  showQueue();\n});\n\nrefs.addToQueueBtn.addEventListener('click', () => {\n  if (refs.btnWatched.classList.contains('active-btn')) {\n    return showWatched();\n  }\n\n  showQueue();\n});\n\nfunction renderMovieCard(movies) {\n  const markup = movies\n    .map(\n      ({\n        id,\n        title,\n        original_title,\n        release_date,\n        first_air_date,\n        poster_path,\n        genres,\n      }) => {\n        const moviePoster = poster_path\n          ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n          : noImg;\n\n        const movieDate = release_date\n          ? release_date.slice(0, 4)\n          : first_air_date\n          ? first_air_date.slice(0, 4)\n          : 'Unknown year';\n        const movieName = title ? title : original_title;\n\n        // Wyświetlane są tylko dwa pierwsze gatunki filmowe\n        let matchedGenres = genres.map(genre => genre.name);\n        matchedGenres =\n          matchedGenres.length > 0\n            ? matchedGenres.length > 2\n              ? matchedGenres.slice(0, 2).join(', ') + ' (...)'\n              : matchedGenres.join(', ')\n            : 'Unknown genre';\n\n        return `<li class=\"movie-container__card\" data-id=\"${id}\">\n            <div class=\"poster\"><img class=\"poster__img\" src=\"${moviePoster}\" alt=\"${title} poster\" loading=\"lazy\" /></div>\n            <div class=\"movieInfo\">\n               <p class=\"movieInfo__item movieInfo--title\">${movieName}</p>\n               <p class=\"movieInfo__item\">\n                     ${matchedGenres} | ${movieDate}\n              </p>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n\n  refs.libraryGallery.innerHTML = markup;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"k7EMm\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"k48PE\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$krGWQ","$ce22c8bf95d4d075$exports","URL","resolve","import","meta","url","toString","$3772e8b7f2be92c1$exports","$4579d646e857668e$var$showWatched","async","moviesId","$31u3U","default","watched","$4579d646e857668e$var$renderMovieCard","$7rYDH","getMoviesById","libraryGallery","style","justifyContent","btnWatched","classList","contains","add","btnQueue","remove","innerHTML","$parcel$interopDefault","err","console","error","stack","addEventListener","$4579d646e857668e$var$showQueue","queue","movies","markup","map","title","original_title","release_date","first_air_date","poster_path","genres","moviePoster","movieDate","slice","movieName","matchedGenres","genre","name","join","addToWatchedBtn","addToQueueBtn"],"version":3,"file":"library.516c1cdc.js.map"}