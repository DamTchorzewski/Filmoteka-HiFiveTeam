{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-db316d8b3906b9b8.js","src/js/library.js","src/js/my-library.js","node_modules/@parcel/runtime-js/lib/runtime-55da197d3dd48086.js","node_modules/@parcel/runtime-js/lib/runtime-1e8406c846ca0a20.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.72553b0f.js\\\",\\\"6QC5f\\\":\\\"noimg.9467229c.jpg\\\",\\\"63qS6\\\":\\\"grandma.62956977.jpg\\\",\\\"fRoIN\\\":\\\"library.d65a7dfa.js\\\"}\"));","import './modal-movie.js';\nimport './btn-modal.js';\nimport './modal-team.js';\nimport './my-library.js';\nimport './trailer.js';\n","import refs from './refs';\nimport Api from './api';\nimport grandma from '../images/my-library/grandma.jpg';\nimport noImg from '../images/movies-gallery/noimg.jpg';\nimport Storage from './local-storage';\nimport Loader from './loader';\n\nconst showWatched = async () => {\n  try {\n    Loader.show(refs.loader);\n\n    const moviesId = Storage.watched;\n    const movies = await Api.getMoviesById(moviesId);\n\n    Loader.hide(refs.loader);\n    renderMovieCard(movies);\n    refs.libraryGallery.style.justifyContent = 'flex-start';\n\n    if (!refs.btnWatched.classList.contains('active-btn')) {\n      refs.btnWatched.classList.add('active-btn');\n      refs.btnQueue.classList.remove('active-btn');\n    }\n\n    if (!Storage.watched.length) {\n      refs.libraryGallery.innerHTML = `<li class=\"grandma\"><img src=\"${grandma}\" alt=\"Grandma, there's nothing here\" /></li>`;\n      refs.libraryGallery.style.justifyContent = 'center';\n    }\n  } catch (err) {\n    console.error(err.stack);\n  }\n};\n\nshowWatched();\nrefs.btnWatched.addEventListener('click', showWatched);\n\nconst showQueue = async () => {\n  try {\n    Loader.show(refs.loader);\n\n    const moviesId = Storage.queue;\n    const movies = await Api.getMoviesById(moviesId);\n\n    Loader.hide(refs.loader);\n    renderMovieCard(movies);\n    refs.libraryGallery.style.justifyContent = 'flex-start';\n\n    if (!refs.btnQueue.classList.contains('active-btn')) {\n      refs.btnQueue.classList.add('active-btn');\n      refs.btnWatched.classList.remove('active-btn');\n    }\n\n    if (!Storage.queue.length) {\n      refs.libraryGallery.innerHTML = `<li class=\"grandma\"><img src=\"${grandma}\" alt=\"Grandma, there's nothing here\" /></li>`;\n      refs.libraryGallery.style.justifyContent = 'center';\n    }\n  } catch (err) {\n    console.error(err.stack);\n  }\n};\n\nrefs.btnQueue.addEventListener('click', showQueue);\n\nrefs.addToWatchedBtn.addEventListener('click', () => {\n  if (refs.btnWatched.classList.contains('active-btn')) {\n    return showWatched();\n  }\n\n  showQueue();\n});\n\nrefs.addToQueueBtn.addEventListener('click', () => {\n  if (refs.btnWatched.classList.contains('active-btn')) {\n    return showWatched();\n  }\n\n  showQueue();\n});\n\nfunction renderMovieCard(movies) {\n  const markup = movies\n    .map(\n      ({\n        id,\n        title,\n        original_title,\n        release_date,\n        first_air_date,\n        poster_path,\n        genres,\n      }) => {\n        const posterSize = window.devicePixelRatio > 1 ? 'original' : 'w500';\n        const moviePoster = poster_path\n          ? `https://image.tmdb.org/t/p/${posterSize}/${poster_path}`\n          : noImg;\n\n        const movieDate = release_date\n          ? release_date.slice(0, 4)\n          : first_air_date\n          ? first_air_date.slice(0, 4)\n          : 'Unknown year';\n        const movieName = title ? title : original_title;\n\n        let matchedGenres = genres.map(genre => genre.name);\n        matchedGenres =\n          matchedGenres.length > 0\n            ? matchedGenres.length > 2\n              ? matchedGenres.slice(0, 2).join(', ') + ' (...)'\n              : matchedGenres.join(', ')\n            : 'Unknown genre';\n\n        return `<li class=\"movie-container__card\" data-id=\"${id}\">\n            <div class=\"poster\"><img class=\"poster__img\" src=\"${moviePoster}\" alt=\"${title} poster\" loading=\"lazy\" /></div>\n            <div class=\"movieInfo\">\n               <p class=\"movieInfo__item movieInfo--title\">${movieName}</p>\n               <p class=\"movieInfo__item\">\n                     ${matchedGenres} | ${movieDate}\n              </p>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n\n  refs.libraryGallery.innerHTML = markup;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"63qS6\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"6QC5f\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$krGWQ","$84c8b7586776e1f9$exports","URL","resolve","import","meta","url","toString","$24a44d890b6894ae$exports","$085d2f9f3e302aeb$var$showWatched","async","$gjiCh","default","show","loader","moviesId","$b5rV1","watched","movies","$7rYDH","getMoviesById","hide","$085d2f9f3e302aeb$var$renderMovieCard","libraryGallery","style","justifyContent","btnWatched","classList","contains","add","btnQueue","remove","innerHTML","$parcel$interopDefault","err","console","error","stack","addEventListener","$085d2f9f3e302aeb$var$showQueue","queue","markup","map","title","original_title","release_date","first_air_date","poster_path","genres","posterSize","window","devicePixelRatio","moviePoster","movieDate","slice","movieName","matchedGenres","genre","name","join","addToWatchedBtn","addToQueueBtn"],"version":3,"file":"library.72553b0f.js.map"}